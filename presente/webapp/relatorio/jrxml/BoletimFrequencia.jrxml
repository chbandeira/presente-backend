<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="BoletimFrequencia" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="b8034542-3faa-4f1b-b317-398d3141da17">
	<property name="ireport.zoom" value="1.3310000000000013"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="ESCOLA_NOME" class="java.lang.String"/>
	<parameter name="ESCOLA_COD" class="java.lang.String"/>
	<parameter name="ESCOLA_UA" class="java.lang.String"/>
	<parameter name="NOME_RELATORIO" class="java.lang.String"/>
	<parameter name="MES_ANO_REFERENCIA" class="java.lang.String"/>
	<queryString>
		<![CDATA[select
	m.str_matricula as matricula,
	a.str_nome as nomealuno,
	s.str_descricao as serie,
	t.descricao as turma,
	sa.str_descricao as sala,
	case when m.str_turno = 'MANHA' then 'Matutino'
	when m.str_turno = 'TARDE' then 'Vespertino'
	else 'Noturno'
	end as turno,
	'Presente' as frequencia,
	to_char(a.dat_nascimento, 'dd/MM/yyyy') as datanascimento,
	re.str_nome as responsavel,
	to_char(r.dat_data, 'dd') as dia,
	to_char(r.dat_data, 'HH24:MI') as tempo,
	r.str_tipo_registro as tipo
from matricula m
inner join aluno a on a.id_aluno = m.id_aluno
inner join registro r on r.id_matricula = m.id_matricula
left join serie s on s.id_serie = m.id_serie
left join turma t on t.id_turma = m.id_turma
left join sala sa on sa.id_sala = m.id_sala
left join responsavel re on re.id_responsavel = m.id_responsavel
where to_char(r.dat_data, 'yyyy-MM-dd') between '2013-01-01' and '2013-12-31'
group by
	m.id_matricula,
	a.id_aluno,
	s.id_serie,
	t.id_turma,
	sa.id_sala,
	re.id_responsavel,
	dia,
	tempo,
	r.str_tipo_registro
order by
	nomealuno asc,
	dia asc;]]>
	</queryString>
	<field name="matricula" class="java.lang.String"/>
	<field name="nomealuno" class="java.lang.String"/>
	<field name="serie" class="java.lang.String"/>
	<field name="turma" class="java.lang.String"/>
	<field name="sala" class="java.lang.String"/>
	<field name="turno" class="java.lang.String"/>
	<field name="frequencia" class="java.lang.String"/>
	<field name="datanascimento" class="java.lang.String"/>
	<field name="responsavel" class="java.lang.String"/>
	<field name="dia" class="java.lang.String"/>
	<field name="tempo" class="java.lang.String"/>
	<field name="tipo" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="90" splitType="Stretch">
			<rectangle>
				<reportElement x="0" y="0" width="555" height="90" uuid="f523a324-193e-4d00-bab8-27447c3a3fe1"/>
			</rectangle>
			<textField>
				<reportElement x="0" y="0" width="597" height="29" uuid="d8802e76-621e-4b4d-aff0-ff07a87d14f7"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="18"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{ESCOLA_NOME}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="49" width="597" height="20" uuid="7fde0200-ce22-469c-a710-c2e9d42b29dd"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA["Código da Instituição: "+$P{ESCOLA_COD}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="29" width="597" height="20" uuid="06d6f553-65fc-4437-8644-b76b2e65a881"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA["UA: "+$P{ESCOLA_UA}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="0" y="69" width="555" height="1" uuid="ee5bfeb7-aaed-403b-b621-12872ff70510"/>
			</line>
			<textField>
				<reportElement x="17" y="70" width="231" height="20" uuid="ab9394be-c52d-4e6e-93c1-693037422b23"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{NOME_RELATORIO}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="393" y="70" width="163" height="20" uuid="4e0984c3-90b3-492b-a04c-011f663594e8"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{MES_ANO_REFERENCIA}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="248" y="70" width="138" height="20" uuid="07dec451-5e50-408f-9ee0-ea71afbb8e04"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[MÊS ANO REFERÊNCIA:]]></text>
			</staticText>
		</band>
	</title>
	<pageHeader>
		<band height="82" splitType="Stretch">
			<rectangle>
				<reportElement x="0" y="7" width="555" height="75" uuid="734aa9f7-6d5f-4ed7-b229-fd39dc5cce50"/>
			</rectangle>
			<staticText>
				<reportElement x="9" y="16" width="59" height="20" uuid="3c2bb336-4f63-408b-af1e-5ae247e0fe70"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Matrícula:]]></text>
			</staticText>
			<staticText>
				<reportElement x="248" y="16" width="42" height="20" uuid="87e1f96e-526e-496b-848e-10f9bff719ec"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Nome:]]></text>
			</staticText>
			<staticText>
				<reportElement x="9" y="36" width="42" height="20" uuid="670a6032-25cf-4749-ab4d-196ebce778ce"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Série:]]></text>
			</staticText>
			<staticText>
				<reportElement x="9" y="56" width="127" height="20" uuid="8226f4cc-0635-4202-8834-636e06d4e39a"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Data de Nascimento:]]></text>
			</staticText>
			<staticText>
				<reportElement x="301" y="36" width="42" height="20" uuid="afd8e942-fbda-4e53-ba16-59f32270a136"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Turno:]]></text>
			</staticText>
			<staticText>
				<reportElement x="248" y="56" width="138" height="20" uuid="1b29e868-0aad-42c2-80ea-f634c4528d0d"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Nome do Responsável:]]></text>
			</staticText>
			<staticText>
				<reportElement x="151" y="36" width="50" height="20" uuid="28c225be-722a-45d5-a67a-bd0c4a21adfd"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Turma:]]></text>
			</staticText>
			<staticText>
				<reportElement x="443" y="36" width="33" height="20" uuid="160a966e-beeb-4024-a824-5164359970b2"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Sala:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="68" y="16" width="180" height="20" uuid="6a01d1d9-466d-4209-9ef3-bd1fb4de3547"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{matricula}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="51" y="36" width="100" height="20" uuid="56e90b23-e421-456a-8cf4-35fe11106932"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{serie}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="201" y="36" width="100" height="20" uuid="91fff288-d0dc-409c-a8ca-cf8c3274d0e6"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{turma}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="343" y="36" width="100" height="20" uuid="6d3ad57f-de18-42cd-94f3-d9ab21abfb0a"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{turno}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="476" y="36" width="79" height="20" uuid="861e1cdc-bff2-465a-a778-cf8ebc595e8b"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{sala}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="290" y="16" width="265" height="20" uuid="20a48bae-92f7-43c5-8602-7b8042d847be"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{nomealuno}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="136" y="56" width="112" height="20" uuid="6a0b0607-504d-469b-b966-b42a105996c5"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{datanascimento}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="386" y="56" width="169" height="20" uuid="25d40c52-55ef-4607-b48b-3c6eeaa1d02f"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{responsavel}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="28" splitType="Stretch">
			<staticText>
				<reportElement x="40" y="8" width="242" height="20" uuid="6a2d9dd7-03ea-4353-a512-fbffca8c35aa"/>
				<box>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Frequência]]></text>
			</staticText>
			<staticText>
				<reportElement x="282" y="8" width="137" height="20" uuid="a11b5689-608b-4328-b0d0-0baee974b8d0"/>
				<box>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Entrada]]></text>
			</staticText>
			<staticText>
				<reportElement x="419" y="8" width="136" height="20" uuid="16c67705-30c9-4452-ad7f-ba17020936c7"/>
				<box>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Saída]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="8" width="40" height="20" uuid="5abfc43c-74b6-4db4-8b4c-10e3fc23a0b4"/>
				<box>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Dia]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<textField>
				<reportElement x="0" y="0" width="40" height="20" uuid="510e539b-4316-405e-a277-a429e50afb5d"/>
				<box>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{dia}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="40" y="0" width="242" height="20" uuid="7d79a191-0ab9-4197-8f26-7c10e16c7a32"/>
				<box>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{frequencia}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="282" y="0" width="137" height="20" uuid="da8bae24-999a-41ac-bde4-559126658783"/>
				<box>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{tipo}.equals("ENTRADA") ? $F{tempo} : ""]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="419" y="0" width="136" height="20" uuid="102be310-8224-4cd4-aec8-22e1ce4f84a2"/>
				<box>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{tipo}.equals("SAIDA") ? $F{tempo} : ""]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="147" splitType="Stretch">
			<rectangle>
				<reportElement x="0" y="7" width="555" height="109" uuid="ae22d4a9-1b22-47fe-896e-4857a649c56b"/>
			</rectangle>
			<staticText>
				<reportElement x="9" y="7" width="81" height="20" uuid="18c27a60-f263-4ce7-968b-6fb0ed978b2a"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Ocorrências:]]></text>
			</staticText>
			<textField>
				<reportElement x="428" y="127" width="48" height="20" uuid="71dc12d3-b455-468a-abb6-4f264f033b99"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="499" y="127" width="57" height="20" uuid="b305f03e-68d3-471d-b7b7-e66b5f6fa8f0"/>
				<textFieldExpression><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="477" y="127" width="22" height="20" uuid="15128536-e24c-4702-bcd8-19de846cd7f5"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[de]]></text>
			</staticText>
			<textField pattern="EEEEE, dd &apos;de&apos; MMMMM &apos;de&apos; yyyy">
				<reportElement x="0" y="127" width="291" height="20" uuid="2a2f8621-e75d-4671-9b85-352011c5f884"/>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<summary>
		<band splitType="Stretch"/>
	</summary>
</jasperReport>
