<html xmlns="http://www.w3.org/1999/xhtml"  
    xmlns:h="http://java.sun.com/jsf/html"  
    xmlns:f="http://java.sun.com/jsf/core"  
    xmlns:ui="http://java.sun.com/jsf/facelets"  
    xmlns:p="http://primefaces.org/ui">  
  
<ui:composition template="../layout/template.xhtml">  
    <ui:define name="corpo">  
		<p:panel header="#{lbl.consultarAluno}" closable="true">
		
		<h:form id="frmConsulta">
		
			<p:messages autoUpdate="true" />
			
			<p:focus context="painel"/>
		    
	  		<h:panelGrid 
	  			id="painel"
				columns="2" 
				cellspacing="4"
				columnClasses="panelGridRight,panelGridLeft">
				
				<h:outputLabel for="nome" value="#{lbl.nome}:" />
			    <p:inputText id="nome" value="#{alunoMB.matricula.aluno.nome}" label="#{lbl.nome}" maxlength="50" size="50"/>
			    
			    <h:outputLabel for="matricula" value="#{lbl.matricula}:" />  
			    <p:inputText id="matricula" value="#{alunoMB.matricula.matricula}" label="#{lbl.matricula}" maxlength="15">
			    	<f:convertNumber integerOnly="true"></f:convertNumber>
			    </p:inputText> 	
			    
			    <h:outputLabel for="anoLetivo" value="#{lbl.anoLetivo}:"/>  
			    <p:inputText id="anoLetivo" value="#{alunoMB.matricula.anoLetivo}" label="#{lbl.anoLetivo}" maxlength="4" size="4">
			    	<f:convertNumber integerOnly="true" pattern="####"></f:convertNumber>
			    </p:inputText>
			    
			</h:panelGrid>

			<p:separator></p:separator>
			
			<p:commandButton 
				value="#{lbl.consultar}"
				icon="ui-icon-search" 
				update="frmConsulta"
				actionListener="#{alunoMB.consultar}"/>
			
			<p:separator></p:separator>
				
			<!-- LISTA -->
				
			<p:dataTable 
				id="dataTable" 
				var="matricula" 
				value="#{alunoMB.matriculas}" 
				paginator="true" 
				rows="10" 
				emptyMessage="#{msg.MSG001}">   
	  
		        <p:column headerText="#{lbl.matricula}">  
		            <h:outputText value="#{matricula.matricula}" />  
		        </p:column>
		        
		        <p:column headerText="#{lbl.anoLetivo}">  
		            <h:outputText value="#{matricula.anoLetivo}" />  
		        </p:column>
		        
		        <p:column headerText="#{lbl.nome}">  
		            <h:outputText value="#{matricula.aluno.nome}" />  
		        </p:column>  
		        
		        <p:column headerText="#{lbl.serie}">  
		            <h:outputText value="#{matricula.serie.descricao}" />  
		        </p:column>  
		        
		        <p:column headerText="#{lbl.turma}">  
		            <h:outputText value="#{matricula.turma.descricao}" />  
		        </p:column>  
		        
		        <p:column headerText="#{lbl.turno}">  
		            <h:outputText value="#{matricula.turno.descricao}" />  
		        </p:column>
		        
		        <p:column headerText="#{lbl.bolsita}">
		        	<h:outputText value="#{matricula.bolsista}" converter="simNaoConverter" />
		        </p:column>  
		  
		 		<p:column 
					headerText="#{lbl.opcoes}" 
					style="width: 150px;">
					
					<center>
						<p:commandButton icon="ui-icon-folder-open" title="#{lbl.visualizarCadastro}" actionListener="#{alunoMB.alterar}"/>
			            <p:commandButton rendered="#{perfilMB.admin || perfilMB.diretor}" title="#{lbl.excluirRegistro}" icon="ui-icon-trash" onclick="PF('confirmaExcluir').show()">
			            	<f:setPropertyActionListener target="#{alunoMB.matriculaSelecionada}" value="#{matricula}"></f:setPropertyActionListener>
			            </p:commandButton>
					</center>
					
					<!-- CAIXA DE DIALOGO -->
					
					<p:confirmDialog 
						message="#{msg.MSG002}"  
		                header="#{lbl.excluirRegistro}" 
		                severity="alert" 
		                widgetVar="confirmaExcluir">  
				        <p:commandButton 
				        	value="#{lbl.sim}"
				        	actionListener="#{alunoMB.excluir}" 
				        	ajax="false"
				        	oncomplete="PF('confirmaExcluir').hide()"/>
				        <p:commandButton 
				        	value="#{lbl.nao}" 
				        	onclick="PF('confirmaExcluir').hide()" 
				        	type="button" />   
				    </p:confirmDialog>
				</p:column>
				
		        <f:facet name="footer">
		        	<h:outputLabel rendered="#{alunoMB.matriculas.rowCount gt 0}" value="#{alunoMB.matriculas.rowCount}"/>
		        	<h:outputLabel rendered="#{alunoMB.matriculas.rowCount gt 0}" value=" #{msg.MSG041}"/>
		        </f:facet>
		  
		    </p:dataTable> 	
			
		</h:form>
			
	    </p:panel>
    </ui:define>  
</ui:composition>  
</html> 