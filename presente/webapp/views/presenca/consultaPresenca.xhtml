<html xmlns="http://www.w3.org/1999/xhtml"  
    xmlns:h="http://java.sun.com/jsf/html"  
    xmlns:f="http://java.sun.com/jsf/core"  
    xmlns:ui="http://java.sun.com/jsf/facelets"  
    xmlns:p="http://primefaces.org/ui">  
  
<ui:composition template="../layout/template.xhtml">  
    <ui:define name="corpo">  
		<p:panel header="#{lbl.consultarPresenca}" closable="true">    
		
			<h:form id="frmConsulta">
		
			<p:messages autoUpdate="true" />
		    
		    <p:focus context="painel"/>
		
	  		<h:panelGrid 
	  			id="painel"
				columns="2" 
				cellspacing="4"
				columnClasses="panelGridRight,panelGridLeft">
				
				<h:outputLabel for="nome" value="#{lbl.nomeAluno}:" />
			    <p:inputText id="nome" value="#{presencaMB.registro.matricula.aluno.nome}" label="#{lbl.nomeAluno}" maxlength="50" size="50"/>
			    
			    <h:outputLabel for="matricula" value="#{lbl.matricula}:" />  
			    <p:inputText id="matricula" value="#{presencaMB.registro.matricula.matricula}" label="#{lbl.matricula}" maxlength="15">
			    	<f:convertNumber integerOnly="true"></f:convertNumber>
			    </p:inputText> 	
			    
			    <h:outputLabel for="periodoInicial" value="#{lbl.periodoInicial}:" />  
			    <p:calendar navigator="true" value="#{presencaMB.periodoInicial}" id="periodoInicial" label="#{lbl.periodoInicial}" showOn="button" pattern="dd/MM/yyyy" locale="pt_BR"/>
			    
			    <h:outputLabel for="periodoFinal" value="#{lbl.periodoFinal}:" />
			    <p:calendar navigator="true" value="#{presencaMB.periodoFinal}" id="periodoFinal" label="#{lbl.periodoFinal}" showOn="button" pattern="dd/MM/yyyy" locale="pt_BR"/>  
				
			</h:panelGrid>
			
			<p:separator></p:separator>
			
			<p:commandButton 
				value="#{lbl.consultar}"
				icon="ui-icon-search"
				update="frmConsulta" 
				actionListener="#{presencaMB.consultar}"/>
			
			<p:commandButton 
				value="#{lbl.limpar}"
				icon="ui-icon-cancel"
				update="frmConsulta" 
				actionListener="#{presencaMB.limpar}"/>
				
			<p:separator></p:separator>
				
			<!-- LISTA -->
				
			<p:dataTable 
				id="dataTable" 
				var="registro" 
				value="#{presencaMB.registros}" 
				paginator="true"
				rows="10"
				emptyMessage="#{msg.MSG001}">  
	  
		        <p:column headerText="#{lbl.matricula}">  
		            <h:outputText value="#{registro.matricula.matricula}" />  
		        </p:column>
		        
		        <p:column headerText="#{lbl.anoLetivo}">  
		            <h:outputText value="#{registro.matricula.anoLetivo}" />  
		        </p:column>
		        
		        <p:column headerText="#{lbl.nomeAluno}">  
		            <h:outputText value="#{registro.matricula.aluno.nome}" />  
		        </p:column>
		        
		        <p:column headerText="#{lbl.serie}">  
		            <h:outputText value="#{registro.matricula.serie.descricao}" />  
		        </p:column>

		        <p:column headerText="#{lbl.turma}">  
		            <h:outputText value="#{registro.matricula.turma.descricao}" />  
		        </p:column>

		        <p:column headerText="#{lbl.sala}">  
		            <h:outputText value="#{registro.matricula.sala.descricao}" />  
		        </p:column>

		        <p:column headerText="#{lbl.bolsita}">  
		        	<h:outputText value="#{registro.matricula.bolsista}" converter="simNaoConverter" />
		        </p:column>  
		        
		        <p:column headerText="#{lbl.dataHora}">  
		            <h:outputText value="#{registro.data}" converter="dataHoraFullConverter"/>  
		        </p:column>

		        <p:column headerText="#{lbl.tipoRegistro}">  
		            <h:outputText value="#{registro.tipoRegistro.descricao}" />  
		        </p:column>
		        
		        <f:facet name="footer">
		        	<h:outputLabel rendered="#{presencaMB.registros.rowCount gt 0}" value="#{presencaMB.registros.rowCount}"/>
		        	<h:outputLabel rendered="#{presencaMB.registros.rowCount gt 0}" value=" #{msg.MSG041}"/>
		        </f:facet>
		  
		    </p:dataTable>	
		    
			</h:form>
	    </p:panel>
    </ui:define>  
</ui:composition>  
</html> 